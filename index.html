<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ウィークリータスクボード</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="apple-touch-icon" sizes="180x180" href="favicon.svg">
    <link rel="manifest" href="manifest.json">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#4a90e2">
    <meta name="description" content="効率的なタスク管理のためのウィークリータスクボード">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="タスクボード">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>ウィークリータスクボード</h1>
        <div id="header-controls">
            <button id="add-task-btn">タスクを追加</button>
            <div id="category-filter">
                <label for="filter-category">カテゴリフィルター:</label>
                <select id="filter-category">
                    <option value="">すべて表示</option>
                    <option value="task">タスク</option>
                    <option value="meeting">打ち合わせ</option>
                    <option value="review">レビュー</option>
                    <option value="bugfix">バグ修正</option>
                    <option value="document">ドキュメント作成</option>
                    <option value="research">学習・調査</option>
                </select>
            </div>
            <div id="user-settings">
                <label for="ideal-daily-minutes">1日の理想稼働時間 (分):</label>
                <input type="number" id="ideal-daily-minutes" value="480" step="30">
            </div>
            <div id="navigation">
                <button id="prev-week">前週へ</button>
                <button id="today">今週に戻る</button>
                <button id="next-week">次週へ</button>
                <div id="date-picker-wrapper">
                    <input type="date" id="date-picker" readonly>
                </div>
            </div>
            <div id="data-management">
                <button id="export-data-btn">エクスポート</button>
                <button id="import-data-btn">インポート</button>
                <input type="file" id="import-file-input" style="display: none;" accept=".json">
                <button id="archive-toggle">📁 アーカイブ</button>
                <button id="theme-toggle">🌙 ダーク</button>
            </div>
        </div>
        <h2 id="week-title"></h2>
    </header>
    <div id="app-container">
        <main id="task-board">
            <div class="day-column" id="monday">
                <h3>月曜日 <span class="daily-total-time"></span></h3>
                <div class="day-column-hint">クリックでタスク作成</div>
            </div>
            <div class="day-column" id="tuesday">
                <h3>火曜日 <span class="daily-total-time"></span></h3>
                <div class="day-column-hint">クリックでタスク作成</div>
            </div>
            <div class="day-column" id="wednesday">
                <h3>水曜日 <span class="daily-total-time"></span></h3>
                <div class="day-column-hint">クリックでタスク作成</div>
            </div>
            <div class="day-column" id="thursday">
                <h3>木曜日 <span class="daily-total-time"></span></h3>
                <div class="day-column-hint">クリックでタスク作成</div>
            </div>
            <div class="day-column" id="friday">
                <h3>金曜日 <span class="daily-total-time"></span></h3>
                <div class="day-column-hint">クリックでタスク作成</div>
            </div>
            <div class="day-column" id="saturday">
                <h3>土曜日 <span class="daily-total-time"></span></h3>
                <div class="day-column-hint">クリックでタスク作成</div>
            </div>
            <div class="day-column" id="sunday">
                <h3>日曜日 <span class="daily-total-time"></span></h3>
                <div class="day-column-hint">クリックでタスク作成</div>
            </div>
        </main>
        <aside id="sidebar">
            <div id="unassigned-tasks" class="day-column">
                <h3>未割り当て/持ち越し</h3>
                <div id="unassigned-list" class="task-list">
                    <!-- Unassigned tasks will be rendered here -->
                </div>
            </div>
        </aside>
    </div>

    <!-- アーカイブビュー -->
    <div id="archive-view" style="display: none;">
        <div id="archive-header">
            <h2>📁 完了タスクアーカイブ</h2>
            <div id="archive-controls">
                <button id="close-archive">✕ 閉じる</button>
                <button id="clear-archive">🗑️ 全削除</button>
            </div>
        </div>
        <div id="archive-content">
            <div id="archive-list">
                <!-- アーカイブされたタスクがここに表示される -->
            </div>
        </div>
    </div>

    <!-- タスク追加モーダル -->
    <div id="task-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2>タスクを新規登録</h2>
            <form id="task-form">
                <label for="task-name">タスク名:</label>
                <input type="text" id="task-name" required>

                <label for="estimated-time">見積もり時間 (時間):</label>
                <input type="number" id="estimated-time" min="0" step="0.5" required>

                <label for="task-priority">優先度:</label>
                <select id="task-priority" required>
                    <option value="medium">中</option>
                    <option value="high">高</option>
                    <option value="low">低</option>
                </select>

                <label for="task-category">カテゴリ:</label>
                <select id="task-category" required>
                    <option value="task">タスク</option>
                    <option value="meeting">打ち合わせ</option>
                    <option value="review">レビュー</option>
                    <option value="bugfix">バグ修正</option>
                    <option value="document">ドキュメント作成</option>
                    <option value="research">学習・調査</option>
                </select>

                <label for="task-date">担当日:</label>
                <input type="date" id="task-date" required readonly>

                <label for="due-date">期限:</label>
                <div id="due-date-container">
                    <input type="date" id="due-date" readonly>
                    <select id="due-time-period">
                        <option value="">指定なし</option>
                        <option value="morning">午前</option>
                        <option value="afternoon">午後</option>
                    </select>
                    <select id="due-hour" style="display: none;">
                        <option value="">時間指定なし</option>
                        <option value="9">9時</option>
                        <option value="10">10時</option>
                        <option value="11">11時</option>
                        <option value="12">12時</option>
                        <option value="13">13時</option>
                        <option value="14">14時</option>
                        <option value="15">15時</option>
                        <option value="16">16時</option>
                        <option value="17">17時</option>
                        <option value="18">18時</option>
                        <option value="19">19時</option>
                        <option value="20">20時</option>
                        <option value="21">21時</option>
                        <option value="22">22時</option>
                    </select>
                </div>

                <label for="task-details">詳細メモ:</label>
                <textarea id="task-details"></textarea>

                <div id="form-buttons">
                    <button type="submit">登録</button>
                    <button type="button" id="duplicate-task-btn" style="display: none;">📋 複製</button>
                </div>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>